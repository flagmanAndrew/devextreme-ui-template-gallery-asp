@using DevExtremeVSTemplateMVC.Models
@model TaskMainSortableViewModel

<div id='kanban' class='kanban'>
    @(Html.DevExtreme().ScrollView()
        .Direction(ScrollDirection.Both)
        .ShowScrollbar(ShowScrollbarMode.Always)
        .ID("kanban-scroll-view-id")
        .Content(
            @Html.DevExtreme().Sortable()
            .ID("kanban-sortable-id")
            .ItemOrientation(Orientation.Horizontal)
            .Handle(".list-title")
            .MoveItemOnDrop(true)
            .OnReorder("onStatusReorder")
            .Content(@<text>
                @for (int i = 0; i < Model.StatusOrder.Count; i++)
                {
                    await Html.RenderPartialAsync("../PlanningTasks/Kanban/_TaskList", new TaskListPartialViewModel
                    {
                        Status = Model.StatusOrder[i],
                        TaskList = Model.Tasks,
                        StatusIndex = i,
                    });
                }
            </text>).ToString()
        )
    )
</div>