<link href="~/css/views/planningtasklist.css" rel="stylesheet" />
<link href="~/css/components/StatusSelectBox.css" rel="stylesheet" />
<script src="~/js/views/planningtasklist.js"></script>

@{
    int selectedTabIndex = 0;
    if (this.Context.Request.Path.Value.Contains("Kanban")) selectedTabIndex = 1;
    if (this.Context.Request.Path.Value.Contains("Gantt")) selectedTabIndex = 2;
}

@(Html.DevExtreme().Toolbar()
    .ElementAttr(new { @class = "toolbar-common theme-dependent" })
    .Items(items => {
        items.Add().Location(ToolbarItemLocation.Before)
            .Template(@<text>
                <span class="toolbar-header">Tasks</span>
            </text>);
        items.Add().Location(ToolbarItemLocation.Before)
            .Template(new TemplateName("TabsView"));

        items.Add().Location(ToolbarItemLocation.After)
            .LocateInMenu(ToolbarItemLocateInMenuMode.Never)
            .CssClass("add-grid-row")
            .Widget(w => w.Button()
            .Text("Add Task")
            .Icon("plus")
            .Type(ButtonType.Default)
            .StylingMode(ButtonStylingMode.Contained)
            .OnClick("addTask"));

        items.Add().Location(ToolbarItemLocation.After)
            .LocateInMenu(ToolbarItemLocateInMenuMode.Never)
            .Widget(w => w.Button()
            .Text("Refresh")
            .Icon("refresh")
            .StylingMode(ButtonStylingMode.Text)
            .OnClick("reload"))
            .ShowText(ToolbarItemShowTextMode.InMenu);

        items.Add().Location(ToolbarItemLocation.After)
            .Disabled(true)
            .LocateInMenu(ToolbarItemLocateInMenuMode.Never)
            .ShowText(ToolbarItemShowTextMode.InMenu)
            .Widget(w => w.Button()
            .Text("Column Chooser")
            .Icon("columnchooser")
            .StylingMode(ButtonStylingMode.Text)
            .OnClick("chooseColumnDataGrid"));

         items.Add().Location(ToolbarItemLocation.After)
            .LocateInMenu(ToolbarItemLocateInMenuMode.Never)
            .Template(@<text>
                <div><div class="separator" /></div>
            </text>);

         items.Add().Location(ToolbarItemLocation.After)
            .Disabled(true)
            .LocateInMenu(ToolbarItemLocateInMenuMode.Never)
            .ShowText(ToolbarItemShowTextMode.InMenu)
            .Widget(w => w.Button()
            .Text("Export to PDF")
            .Icon("exportpdf")
            .StylingMode(ButtonStylingMode.Text)
            .OnClick("exportToPdf"));

         items.Add().Location(ToolbarItemLocation.After)
            .Disabled(true)
            .LocateInMenu(ToolbarItemLocateInMenuMode.Never)
            .ShowText(ToolbarItemShowTextMode.InMenu)
            .Widget(w => w.Button()
            .Text("Export to Exel")
            .Icon("exportxlsx")
            .StylingMode(ButtonStylingMode.Text)
            .OnClick("exportToXlsx"));

         items.Add().Location(ToolbarItemLocation.After)
            .Disabled(true)
            .LocateInMenu(ToolbarItemLocateInMenuMode.Never)
            .Widget(w => w.TextBox()
            .Placeholder("Task Search")
            .Mode(TextBoxMode.Search)
            .OnInput("searchDataGrid"));
    })
)

@using (Html.DevExtreme().NamedTemplate("TabsView")) {
    @(
        Html.DevExtreme().Tabs()
            .Width("auto")
            .ShowNavButtons(false)
            .ScrollByContent(true)
            .SelectedIndex(selectedTabIndex)
            .Items(items => {
                items.Add().Text("List");
                items.Add().Text("Kanban Board");
                items.Add().Text("Gantt");
            })
            .OnItemClick("tabValueChange")
    )
}