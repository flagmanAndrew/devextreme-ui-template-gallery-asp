<link href="~/css/views/CardAuth.css" rel="stylesheet" />
<link href="~/css/components/SignUpForm.css" rel="stylesheet" />
<link href="~/css/components/OAuthForm.css" rel="stylesheet" />
<script src="~/js/layouts/authlayout.js"></script>

@using DevExtremeVSTemplateMVC.Models;
@model UserData
@{
    bool topLayout = this.Context.Request.Path.Value.Contains("Home");
}

<script>
    window.uitgAppContext.AuthLayoutController.keepTopLayout = '@Html.Raw(topLayout)' === "True";
</script>

<div class="auth-card">
    <div class="dx-card content">
        @await Html.PartialAsync("/Views/Auth/_AuthHeader.cshtml", "Register")
        <div class="content">
            <form class="create-account-form">
                @(
                    Html.DevExtreme().Form<UserData>()
                    .ID("form-instance-register")
                    .FormData(Model)
                    .Items(items =>
                    {
                        items.AddSimpleFor(m => m.Email)
                        .Editor(e => e
                        .TextBox()
                        .StylingMode(EditorStylingMode.Filled)
                        .Placeholder("Email")
                        .Mode(TextBoxMode.Email)
                        .Value("jheart@dx-email.com")
                        )
                        .Label(l => l.Visible(false));

                        items.AddSimpleFor(m => m.Password)
                        .Editor(e => e
                        .TextBox()
                        .StylingMode(EditorStylingMode.Filled)
                        .Placeholder("Password")
                        .Mode(TextBoxMode.Password)
                        ).Label(l => l.Visible(false));

                        items.AddSimpleFor(m => m.ConfirmPassword)
                        .Editor(e => e
                        .TextBox()
                        .StylingMode(EditorStylingMode.Filled)
                        .Placeholder("Confirm Password")
                        .Mode(TextBoxMode.Password))
                        .Label(l => l.Visible(false));

                        items.AddSimple()
                        .Template(@<text>
                            <div class="policy-info">
                                By creating an account, you agree to the
                                <a href="@(Url.Action("Login", topLayout ? "Home" : "Auth"))" class="spa-link">Terms of
                                    Service?</a> and
                                <a href="@(Url.Action("Login", topLayout ? "Home" : "Auth"))" class="spa-link">Privacy
                                    Policy?</a>
                            </div>
                        </text>);

                        items.AddButton()
                        .ButtonOptions(b => b
                        .Width("100%")
                        .Type(ButtonType.Default)
                        .OnClick("window.uitgAppContext.AuthLayoutController.onCreateSubmit")
                        .Template(new TemplateName("auth-button"))
                        );
                    })
                    )

                <div class="login-link">
                    Have an account?
                    <a href="@(Url.Action("Login", topLayout ? "Home" : "Auth"))" class="spa-link">Sign In</a>
                </div>
            </form>
            <partial name="/Views/Auth/_OAuthButtons.cshtml" />
        </div>

    </div>
</div>

@await Html.PartialAsync("/Views/Auth/_AuthButtonTemplate.cshtml", ("accountLoadingIndicator", "Register"))